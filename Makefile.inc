
RUNNER_IMPLEMENTATION=stdlib

runner/test$(OBJECT_SUFFIX): runner/test.c
	$(COMPILER_C2OBJ) $(PREREQUISITES_ALL) $(COMPILER_C2OBJ_OUTPUT)$@ $(COMPILER_C2OBJ_FLAGS)

runner/prod$(OBJECT_SUFFIX): runner/prod.c
	$(COMPILER_C2OBJ) $(PREREQUISITES_ALL) $(COMPILER_C2OBJ_OUTPUT)$@ $(COMPILER_C2OBJ_FLAGS)

runner/main$(OBJECT_SUFFIX): runner/main.c
	$(COMPILER_C2OBJ) $(PREREQUISITES_ALL) $(COMPILER_C2OBJ_OUTPUT)$@ $(COMPILER_C2OBJ_FLAGS)

runner/$(RUNNER_IMPLEMENTATION)/impl$(OBJECT_SUFFIX): runner/$(RUNNER_IMPLEMENTATION)/impl.c
	$(COMPILER_C2OBJ) $(PREREQUISITES_ALL) $(COMPILER_C2OBJ_OUTPUT)$@ $(COMPILER_C2OBJ_FLAGS)

runner_test$(EXECUTABLE_SUFFIX): runner/test$(OBJECT_SUFFIX) runner/prod$(OBJECT_SUFFIX) runner/$(RUNNER_IMPLEMENTATION)/impl$(OBJECT_SUFFIX)
	$(LINKER_OBJ2EXE) $(PREREQUISITES_ALL) $(LINKER_OBJ2EXE_OUTPUT)$@ $(LINKER_OBJ2EXE_FLAGS)
	.$(DIRECTORY_SEPARATOR)$@

asserter/test$(OBJECT_SUFFIX): asserter/test.c
	$(COMPILER_C2OBJ) $(PREREQUISITES_ALL) $(COMPILER_C2OBJ_OUTPUT)$@ $(COMPILER_C2OBJ_FLAGS)

asserter/prod$(OBJECT_SUFFIX): asserter/prod.c
	$(COMPILER_C2OBJ) $(PREREQUISITES_ALL) $(COMPILER_C2OBJ_OUTPUT)$@ $(COMPILER_C2OBJ_FLAGS)

asserter_test$(EXECUTABLE_SUFFIX): asserter/test$(OBJECT_SUFFIX) asserter/prod$(OBJECT_SUFFIX) runner/prod$(OBJECT_SUFFIX) runner/main$(OBJECT_SUFFIX) runner/$(RUNNER_IMPLEMENTATION)/impl$(OBJECT_SUFFIX)
	$(LINKER_OBJ2EXE) $(PREREQUISITES_ALL) $(LINKER_OBJ2EXE_OUTPUT)$@ $(LINKER_OBJ2EXE_FLAGS)
	.$(DIRECTORY_SEPARATOR)$@

set/prod$(OBJECT_SUFFIX): set/prod.c
	$(COMPILER_C2OBJ) $(PREREQUISITES_ALL) $(COMPILER_C2OBJ_OUTPUT)$@ $(COMPILER_C2OBJ_FLAGS)

set/test$(OBJECT_SUFFIX): set/test.c
	$(COMPILER_C2OBJ) $(PREREQUISITES_ALL) $(COMPILER_C2OBJ_OUTPUT)$@ $(COMPILER_C2OBJ_FLAGS)

set_test$(EXECUTABLE_SUFFIX): set/test$(OBJECT_SUFFIX) set/prod$(OBJECT_SUFFIX) asserter/prod$(OBJECT_SUFFIX) runner/prod$(OBJECT_SUFFIX) runner/main$(OBJECT_SUFFIX) runner/$(RUNNER_IMPLEMENTATION)/impl$(OBJECT_SUFFIX)
	$(LINKER_OBJ2EXE) $(PREREQUISITES_ALL) $(LINKER_OBJ2EXE_OUTPUT)$@ $(LINKER_OBJ2EXE_FLAGS)
	.$(DIRECTORY_SEPARATOR)$@

graph/prod$(OBJECT_SUFFIX): graph/prod.c
	$(COMPILER_C2OBJ) $(PREREQUISITES_ALL) $(COMPILER_C2OBJ_OUTPUT)$@ $(COMPILER_C2OBJ_FLAGS)

graph/test$(OBJECT_SUFFIX): graph/test.c
	$(COMPILER_C2OBJ) $(PREREQUISITES_ALL) $(COMPILER_C2OBJ_OUTPUT)$@ $(COMPILER_C2OBJ_FLAGS)

graph_test$(EXECUTABLE_SUFFIX): graph/test$(OBJECT_SUFFIX) graph/prod$(OBJECT_SUFFIX) asserter/prod$(OBJECT_SUFFIX) runner/prod$(OBJECT_SUFFIX) runner/main$(OBJECT_SUFFIX) runner/$(RUNNER_IMPLEMENTATION)/impl$(OBJECT_SUFFIX)
	$(LINKER_OBJ2EXE) $(PREREQUISITES_ALL) $(LINKER_OBJ2EXE_OUTPUT)$@ $(LINKER_OBJ2EXE_FLAGS)
	.$(DIRECTORY_SEPARATOR)$@

.PHONY:clean
clean:
	$(REMOVE_FILE) \
	runner_test$(EXECUTABLE_SUFFIX) runner$(DIRECTORY_SEPARATOR)*$(OBJECT_SUFFIX) runner$(DIRECTORY_SEPARATOR)$(RUNNER_IMPLEMENTATION)$(DIRECTORY_SEPARATOR)*$(OBJECT_SUFFIX) \
	asserter_test$(EXECUTABLE_SUFFIX) asserter$(DIRECTORY_SEPARATOR)*$(OBJECT_SUFFIX) \
	set_test$(EXECUTABLE_SUFFIX) set$(DIRECTORY_SEPARATOR)*$(OBJECT_SUFFIX) \
	graph_test$(EXECUTABLE_SUFFIX) graph$(DIRECTORY_SEPARATOR)*$(OBJECT_SUFFIX)

